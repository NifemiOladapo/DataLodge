(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8704],{26307:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/order",function(){return n(55381)}])},1650:function(e,t,n){"use strict";var s=n(85893),o=n(67294);t.Z=e=>{let{title:t,children:n,isOpen:l=!0,onToggle:a}=e,[r,d]=(0,o.useState)(l);return(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"bg-primary-500 px-3 py-4 rounded-t-lg cursor-pointer",onClick:()=>{let e=!r;d(e),a&&a(e)},children:(0,s.jsx)("h5",{className:"text-white font-nunito-bold",children:t})}),r&&(0,s.jsx)("div",{className:"border border-primary-strong rounded-b-lg mt-2 p-4 overflow-x-scroll custom-scrollbar",children:n})]})}},55381:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return j}});var s=n(85893),o=n(67294),l=n(25675),a=n.n(l),r=n(41664),d=n.n(r),i=n(86501),c=n(52091),u=n(2777),m=n(1650),x=n(45932),h=n(91666),p=n(87369),f=n(42835),b=n(5791),y=n(2846),v=n(97794),j=!0;t.default=e=>{let{orders:t}=e,{}=(0,v.J)({middleware:"auth",redirectIfAuthenticated:"/login"}),[{userInfo:n}]=(0,p.C4)(),[l,r]=(0,o.useState)(1),[j,N]=(0,o.useState)(50),[g,_]=(0,o.useState)(0),[w,S]=(0,o.useState)(0),[E,P]=(0,o.useState)(0),[C,k]=(0,o.useState)(!1),[A,D]=(0,o.useState)(""),T=async(e,t,n)=>{k(!0),await (0,h.ZP)().put("/orders/update/".concat(e),{paymentReference:t,transactionReference:n}).then(t=>{k(!1);let{data:n}=t;(0,x.XA)(n.message),setTimeout(()=>{router.replace("/dashboard/order/".concat(e))},1500)}).catch(e=>{k(!1);let t=sendError(e);showErrorToast(t.message)})},O=async e=>{k(!0),D(null==e?void 0:e.id);var t,s,o=(null==n?void 0:null===(t=n.profile)||void 0===t?void 0:t.first_name)+" "+(null==n?void 0:null===(s=n.profile)||void 0===s?void 0:s.last_name);MonnifySDK.initialize({amount:parseFloat(null==e?void 0:e.total_price),currency:"NGN",reference:"MEQW"+new String(new Date().getTime()),customerFullName:o,customerEmail:null==n?void 0:n.email,apiKey:"MK_PROD_D3YEHGGGMQ",contractCode:"222675462291",paymentDescription:"Payment for product by "+o,metadata:{order_id:null==e?void 0:e.id,type:"ecommerce"},onLoadStart:()=>{(0,x.XA)("Payment has started")},onLoadComplete:()=>{console.log("SDK is UP")},onComplete:function(t){k(!1),D(""),console.log(t),"FAILED"!==t.status?((0,x.XA)("Payment successful. Thank you for using our store."),dispatch({type:reducerCases.CLEAR_CART}),T(null==e?void 0:e.id,t.paymentReference,t.transactionReference)):showErrorToast("We are so sorry, your payment failed at this time. Do you have any problems making your payment? You can reach out to us.")},onClose:function(e){k(!1),D("")}})};return(0,s.jsx)(f.Z,{children:(0,s.jsx)(m.Z,{title:"All Product Orders",children:(null==t?void 0:t.length)>0?(0,s.jsx)("div",{className:"container p-2 mx-auto sm:p-4 overflow-x-scroll",children:(0,s.jsxs)("table",{className:"min-w-full text-xs",children:[(0,s.jsx)("thead",{className:"",children:(0,s.jsxs)("tr",{className:"text-left",children:[(0,s.jsx)("th",{className:"p-2 font-nunito-bold text-md",children:"No"}),(0,s.jsx)("th",{className:"p-2 font-nunito-bold text-md",children:"Date"}),(0,s.jsx)("th",{className:"p-2 font-nunito-bold text-md",children:"Type"}),(0,s.jsx)("th",{className:"p-2 font-nunito-bold text-md",children:"Amount"}),(0,s.jsx)("th",{className:"p-2 font-nunito-bold text-md",children:"Items"}),(0,s.jsx)("th",{className:"p-2 font-nunito-bold text-md",children:"Status"}),(0,s.jsx)("th",{className:"p-2 font-nunito-bold text-md",children:"Payment"}),(0,s.jsx)("th",{className:"p-2 font-nunito-bold text-md",children:"Action"})]})}),(0,s.jsx)("tbody",{children:null==t?void 0:t.map((e,t)=>{var n;return(0,s.jsxs)("tr",{className:"border border-opacity-20 hover:bg-gray-100",children:[(0,s.jsxs)("td",{className:"p-2 text-md font-nunito-bold",children:[t+1,"."]}),(0,s.jsx)("td",{className:"p-2 text-md font-nunito-bold",children:(0,y.o0)(null==e?void 0:e.created_at)}),(0,s.jsx)("td",{className:"p-2 text-md font-nunito-bold",children:(0,y.f$)(null==e?void 0:e.delivery_type)}),(0,s.jsx)("td",{className:"p-2 text-md font-nunito-bold",children:(0,y.XY)(null==e?void 0:e.total_price)}),(0,s.jsx)("td",{className:"p-2 text-md font-nunito-bold",children:null==e?void 0:null===(n=e.cartItems)||void 0===n?void 0:n.length}),(0,s.jsx)("td",{className:"p-2 text-md font-nunito-bold",children:(0,s.jsx)("div",{className:"p-2 rounded w-xs max-w-sm ".concat((null==e?void 0:e.order_status)==="pending"?"bg-yellow-500 text-gray-900":(null==e?void 0:e.order_status)==="approved"?"bg-blue-500 text-white":(null==e?void 0:e.order_status)==="delivered"?"bg-green-500 text-white":"bg-gray-300 text-black"),children:(0,s.jsx)("p",{className:"text-xs font-bold text-center",children:(0,y.f$)(null==e?void 0:e.order_status)})})}),(0,s.jsx)("td",{className:"p-2 text-md font-nunito-bold",children:(0,s.jsx)("div",{className:"p-2 rounded w-xs max-w-sm ".concat((null==e?void 0:e.payment_status)==="pending"?"bg-yellow-500 text-gray-900":(null==e?void 0:e.payment_status)==="rejected"?"bg-red-500 text-white":(null==e?void 0:e.payment_status)==="paid"?"bg-green-500 text-white":"bg-gray-300 text-black"),children:(0,s.jsx)("p",{className:"text-xs font-bold text-center",children:(0,y.f$)(null==e?void 0:e.payment_status)})})}),(0,s.jsxs)("td",{className:"flex items-center justify-center space-x-2 p-2",children:[(0,s.jsx)(d(),{href:"/dashboard/order/".concat(e.id),className:"bg-primary-400 p-1 rounded-lg",children:(0,s.jsx)(u.rDJ,{size:17,color:b.O.white})}),(null==e?void 0:e.payment_status)==="pending"&&(0,s.jsx)("button",{onClick:()=>O(e),className:"flex items-center space-x-1 bg-primary-900 py-2 px-3 rounded-lg",children:C&&A===(null==e?void 0:e.id)?(0,s.jsx)("div",{children:(0,s.jsx)(i.c0,{size:20,color:"white"})}):(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(c.ypE,{size:17,color:b.O.white}),(0,s.jsx)("span",{className:"text-white font-nunito-bold",children:"Pay"})]})})]})]},t)})})]})}):(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center mt-8",children:[(0,s.jsx)(a(),{src:"/images/list.png",width:100,height:100,alt:"no orders"}),(0,s.jsx)("p",{className:"text-sm font-nunito-bold mt-3",children:"No existing record of any orders yet. Please visit our shop to get cheap gadgets"})]})})})}}},function(e){e.O(0,[3365,5640,3559,8866,7794,7799,2835,2888,9774,179],function(){return e(e.s=26307)}),_N_E=e.O()}]);